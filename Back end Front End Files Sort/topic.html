<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>üåç Biblical Prophecy Intelligence Dashboard</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body {
      font-family: 'Courier New', monospace;
      background: linear-gradient(135deg, #000000 0%, #1a0000 25%, #001a1a 50%, #1a001a 75%, #000000 100%);
      color: #00ff88;
      min-height: 100vh;
      overflow-y: auto;
    }
    .container { max-width: 1600px; margin: 0 auto; padding: 20px; }
    .header {
      text-align: center; margin-bottom: 20px; background: rgba(0,0,0,0.8);
      backdrop-filter: blur(10px); border-radius: 20px; padding: 24px; border: 2px solid #00ff88;
      box-shadow: 0 0 20px rgba(0,255,136,0.3);
    }
    h1 { font-size: 3em; color: #00ff88; text-shadow: 0 0 15px #00ff88; margin-bottom: 8px; }
    .subtitle { opacity: .9; font-size: 1.2em; color: #00ff88; }

    /* Toolbar */
    .toolbar {
      display: flex; justify-content: flex-end; align-items: center; gap: 10px; margin: 10px 0 20px;
    }
    .btn-primary, .btn-secondary {
      padding: 8px 14px; border-radius: 8px; border: 1px solid #00ff88;
      background: rgba(0,0,0,0.7); color: #00ff88; cursor: pointer; font-family: inherit;
    }
    .btn-secondary { border-color: #888; color: #ccc; }
    .btn-primary:hover { box-shadow: 0 0 12px rgba(0,255,136,.35); }

    .global-status {
      background: rgba(0, 0, 0, 0.4);
      border: 2px solid #ff4444;
      border-radius: 15px;
      padding: 20px;
      margin-bottom: 20px;
      text-align: center;
    }
    .global-meter { display: flex; align-items: center; justify-content: center; gap: 20px; flex-wrap: wrap; }
    .prophecy-level { font-size: 1.2em; font-weight: bold; color: #ff4444; text-shadow: 0 0 10px #ff4444; }
    .progress-bar {
      width: 300px; height: 25px; background: rgba(0,0,0,0.8); border: 2px solid #ff4444;
      border-radius: 15px; overflow: hidden; position: relative;
    }
    .progress-fill {
      height: 100%;
      background: linear-gradient(90deg, #00ff88 0%, #ffff00 50%, #ff4444 100%);
      transition: width 0.8s ease; width: 87%; box-shadow: 0 0 15px rgba(255,68,68,0.8);
    }
    .progress-text {
      position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);
      color: #000; font-weight: bold; font-size: 1em;
    }

    .topic-categories {
      display: grid; grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
      gap: 25px; margin-bottom: 28px;
    }
    .topic-card {
      background: rgba(0,0,0,0.8); border: 1px solid #00ff88; border-radius: 15px; padding: 25px;
      box-shadow: 0 0 15px rgba(0,255,136,0.2); transition: all 0.3s ease; position: relative; overflow: hidden;
    }
    .topic-card:hover { transform: translateY(-4px); border-color: #00ff88; box-shadow: 0 0 25px rgba(0,255,136,0.4); }
    .topic-card::before { content: ''; position: absolute; top:0; left:0; right:0; height:3px;
      background: linear-gradient(90deg, #ff4444, #ffff00, #00ff88);
    }
    .topic-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 16px; }
    .topic-title { color: #00ff88; font-size: 1.5em; font-weight: bold; text-shadow: 0 0 8px #00ff88, 0 0 12px rgba(0,255,136,0.5); cursor: pointer; }
    .topic-score { background:#ff4444; color:#fff; padding: 6px 12px; border-radius: 20px; font-weight: bold; font-size: 1.1em; min-width: 60px; text-align: center;}
    .score-high { background: #ff4444; } .score-medium { background: #ffaa00; } .score-low { background: #00aa00; }

    .topic-stats { display: grid; grid-template-columns: repeat(3, 1fr); gap: 12px; margin-bottom: 14px; }
    .mini-stat { text-align: center; background: rgba(20, 20, 20, 0.8); padding: 10px; border-radius: 8px; border: 1px solid #333; }
    .mini-stat-number { font-size: 1.3em; font-weight: bold; color: #00ff88; }
    .mini-stat-label { font-size: .8em; color: #888; margin-top: 4px; }

    .domain-header {
      font-size: 2em;
      color: #ffd700;
      text-shadow: 0 0 10px rgba(255,215,0,0.5);
      margin: 40px 0 20px 0;
      border-bottom: 2px solid rgba(255,215,0,0.3);
      padding-bottom: 10px;
    }
    .topic-grid {
      display: grid; grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
      gap: 25px;
    }

    .topic-keywords { margin-top: 15px; }
    .keyword { display: inline-block; background: rgba(0, 255, 136, 0.1); color: #00ff88; padding: 4px 8px; border-radius: 5px; margin: 2px; font-size: 0.85em; text-decoration: none; border: 1px solid rgba(0, 255, 136, 0.2); }
    .topic-subcategories { margin-top: 10px; }
    .subcategory { display: inline-block; background: rgba(0, 136, 255, 0.1); color: #0088ff; padding: 4px 8px; border-radius: 5px; margin: 2px; font-size: 0.85em; text-decoration: none; border: 1px solid rgba(0, 136, 255, 0.2); }
    .subcategory:hover { background: rgba(0, 136, 255, 0.2); border-color: #0088ff; }

    .recent-articles {
      max-height: 220px; /* Adjust as needed for 5-7 articles */
      overflow-y: auto;
      margin-top: 15px;
      padding-right: 10px; /* For scrollbar */
    }
    .article-item { background: rgba(20,20,20,0.8); border-radius: 8px; padding: 12px; margin-bottom: 10px; border-left: 4px solid #00ff88; cursor: pointer; transition: all .2s ease; }
    .article-item:hover { background: rgba(20,20,20,0.9); transform: translateX(3px); }
    .article-title { font-weight: bold; color: #00ff88; margin-bottom: 5px; font-size: 0.95em; line-height: 1.3; }
    .article-meta { display:flex; justify-content: space-between; align-items: center; font-size: .8em; opacity: .8; }
    .article-score { background: rgba(255,68,68,0.8); color:#fff; padding: 2px 8px; border-radius: 10px; font-weight: bold; }

    .card-delete {
      position: absolute; top: 8px; right: 10px; color: #888; font-weight: bold; cursor: pointer;
      background: transparent; border: none; font-size: 18px; line-height: 1;
    }
    .card-delete:hover { color: #ff4444; }

    .global-stats { background: rgba(255,255,255,0.05); border-radius: 20px; padding: 24px; border: 1px solid rgba(255,215,0,0.3); }
    .stats-title { text-align: center; color: #ffd700; font-size: 1.6em; font-weight: bold; margin-bottom: 18px; }
    .stats-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 18px; }
    .stat-card { background: rgba(0,0,0,0.3); border-radius: 15px; padding: 20px; text-align: center; border: 1px solid rgba(255,255,255,0.1); }
    .stat-number { font-size: 2.2em; font-weight: bold; color: #ffd700; text-shadow: 0 0 10px rgba(255,215,0,0.5); }
    .stat-label { opacity: .85; margin-top: 6px; font-size: 1.05em; }

    
    /* Fullscreen topic detail overlay */
    .topic-detail-backdrop { position: fixed; inset:0; background: rgba(0,0,0,0.75); display:none; z-index:2000; }
    .topic-detail { position: fixed; inset:40px; background: rgba(0,0,0,0.95); border:2px solid #00ff88; border-radius:16px; padding:20px; overflow:auto; z-index:2001; display:none; }
    .topic-detail header { display:flex; align-items:center; justify-content:space-between; gap:12px; margin-bottom:8px; }
    .topic-detail .controls { display:flex; gap:10px; align-items:center; flex-wrap:wrap; }
    .topic-detail .controls select, .topic-detail .controls input { background:#000; color:#00ff88; border:1px solid #00ff88; border-radius:8px; padding:6px 8px; }
    .topic-detail .metrics { display:grid; grid-template-columns: repeat(auto-fit, minmax(180px,1fr)); gap:12px; margin:12px 0; }
    .topic-detail .metric { background: rgba(255,255,255,0.06); border:1px solid rgba(0,255,136,0.35); border-radius:12px; padding:10px; text-align:center; }
    .topic-detail .big { font-size:1.5rem; font-weight:700; }
    .topic-detail .article-list { display:flex; flex-direction:column; gap:10px; margin-top:10px; }
    .topic-detail .article-item { background: rgba(255,255,255,0.04); border:1px solid rgba(255,255,255,0.1); border-radius:10px; padding:10px; }
    .topic-detail .article-title { font-weight:700; }
    .topic-detail .close-btn { border:1px solid #ff4444; color:#ff8888; background:transparent; padding:6px 10px; border-radius:8px; cursor:pointer; }
.live-ticker {
      position: fixed; bottom: 0; left: 0; right: 0; background: rgba(0,0,0,0.95);
      border-top: 2px solid #00ff88; height: 50px; overflow: hidden; z-index: 1000;
    }
    .ticker-content { display:flex; animation: scroll-left 45s linear infinite; align-items: center; height: 100%; white-space: nowrap; }
    @keyframes scroll-left { 0% { transform: translateX(100%);} 100% { transform: translateX(-100%);} }
    .ticker-item { margin: 0 40px; padding: 8px 16px; border-radius: 15px; display: inline-block; font-weight: bold; }
    .ticker-critical { background: rgba(255,68,68,0.3); color:#ff4444; }
    .ticker-high { background: rgba(255,170,0,0.3); color:#ffaa00; }
    .ticker-medium { background: rgba(0,255,136,0.3); color:#00ff88; }

    .loading-pulse { animation: pulse 2s infinite; }
    @keyframes pulse { 0%,100%{opacity:1;} 50%{opacity:.6;} }

    /* Modal */
    .modal.hidden { display: none; }
    .modal { position: fixed; inset: 0; background: rgba(0,0,0,0.65); display: grid; place-items: center; z-index: 2000; }
    .modal-content {
      width: min(520px, 96vw); background: rgba(0,0,0,0.9); border: 1px solid #00ff88;
      border-radius: 14px; padding: 18px 20px; box-shadow: 0 0 25px rgba(0,255,136,0.25);
    }
    .modal-content h2 { margin-bottom: 12px; color: #00ff88; }
    .modal-content label { display: block; margin: 10px 0; font-size: 0.95em; }
    .modal-content input, .modal-content textarea, .modal-content select {
      width: 100%; margin-top: 6px; padding: 8px 10px; border-radius: 8px; border: 1px solid #333;
      background: rgba(20,20,20,0.9); color: #00ff88; font-family: inherit;
    }
    .modal-content textarea { resize: vertical; min-height: 60px; }
    .modal-actions { display: flex; gap: 10px; justify-content: flex-end; margin-top: 14px; }

    /* Feed Test Section */
    .feed-test-section {
      background: rgba(0,50,100,0.2); border: 1px solid #0088ff; border-radius: 15px;
      padding: 20px; margin: 20px 0;
    }
    .feed-test-title { color: #0088ff; font-size: 1.3em; font-weight: bold; margin-bottom: 15px; }
    .test-feed-input { display: flex; gap: 10px; margin-bottom: 15px; }
    .test-url { flex: 1; }
    .test-results { background: rgba(0,0,0,0.5); border-radius: 10px; padding: 15px; margin-top: 10px; max-height: 200px; overflow-y: auto; }

    /* Responsive */
    @media (max-width: 768px) {
      .container { padding: 15px; }
      h1 { font-size: 2.2em; }
      .topic-categories { grid-template-columns: 1fr; gap: 20px; }
      .global-meter { flex-direction: column; gap: 15px; }
      .progress-bar { width: 280px; }
      .stats-grid { grid-template-columns: repeat(2, 1fr); }
    }
  </style>
</head>
<body>
  <div class="container">
    <!-- Header -->
    <div class="header">
      <a href="index.patched.html" style="text-decoration: none;">
        <h1>üåç Biblical Prophecy Intelligence</h1>
        <p class="subtitle">Real-Time Monitoring & Analysis Dashboard</p>
      </a>
    </div>

    <div id="topicDetailContainer">
      <!-- The detailed topic view will be rendered here -->
    </div>
  </div>

  <script>
    // Smart Feed Categorization Engine
    class SmartFeedCategorizer {
      constructor() {
        this.categories = new Map();
      }

      addCategory(id, keywords) {
        this.categories.set(id, keywords.map(k => k.toLowerCase()));
      }

      categorizeArticle(article) {
        const text = `${article.title} ${article.description || ''}`.toLowerCase();
        const scores = new Map();

        for (const [categoryId, keywords] of this.categories) {
          let score = 0;
          for (const keyword of keywords) {
            if (text.includes(keyword)) {
              score += 1;
            }
          }
          if (score > 0) {
            scores.set(categoryId, score);
          }
        }

        if (scores.size === 0) return null;
        
        // Return highest scoring category
        return Array.from(scores.entries()).sort((a, b) => b[1] - a[1])[0][0];
      }
    }

    // Feed Parser
    class FeedParser {
      static async parse(url) {
        try {
          // For RSS feeds, we'd need a CORS proxy or server-side processing
          // For now, simulate the feed parsing
          console.log(`Would parse feed: ${url}`);
          
          // Return mock data for demonstration
          return [
            {
              title: "Sample Article from Feed",
              description: "This is a sample article that would come from the RSS feed",
              url: url,
              pubDate: new Date(),
              score: Math.floor(Math.random() * 10) + 1
            }
          ];
        } catch (error) {
          console.error('Feed parsing error:', error);
          return [];
        }
      }
    }

    class SingleTopicPage {
      constructor() {
        this.storageKey = 'bpi_topics_v2';
        this.topics = this.loadTopics();
        this.init();
      }

      loadTopics() {
        try {
          const raw = localStorage.getItem(this.storageKey);
          if (raw) {
            const arr = JSON.parse(raw);
            if (Array.isArray(arr) && arr.length) return arr;
          }
        } catch (e) {
          console.warn('Failed to load topics from localStorage:', e);
        }
        
        return [
          { 
            id:'antichrist', 
            title:'üë§ Antichrist Candidates', 
            domain: 'prophetic_end_times',
            keywords: ['antichrist', 'world leader', 'global government', 'one world', 'dictator', 'emperor'],
            subCategories: ['UN', 'WEF', 'Globalism'],
            currentScore:8.7, 
            yesterdayScore:8.2, 
            monthlyAvg:7.9, 
            weeklyTrend: 1.1,
            todayArticles:23, 
            url:'/antichrist',
            feedUrl: null
          },
          { 
            id:'temple_mount', 
            title:'üïå Temple Mount Events', 
            domain: 'prophetic_end_times',
            keywords: ['temple mount', 'third temple', 'jerusalem', 'al-aqsa', 'red heifer', 'temple institute'],
            subCategories: ['Red Heifer', 'Sacrifice', 'Third Temple'],
            currentScore:9.1, 
            yesterdayScore:8.8, 
            monthlyAvg:8.5, 
            weeklyTrend: 0.5,
            todayArticles:15, 
            url:'/temple-mount',
            feedUrl: null
          },
          { 
            id:'israel_security', 
            title:'üáÆüá± Israel Security', 
            domain: 'geopolitical_societal_shifts',
            keywords: ['israel', 'idf', 'gaza', 'hamas', 'hezbollah', 'iran', 'israeli'],
            subCategories: ['Gaza', 'West Bank', 'Iran Proxy'],
            currentScore:8.9, 
            yesterdayScore:9.2, 
            monthlyAvg:8.6, 
            weeklyTrend: -0.2,
            todayArticles:31, 
            url:'/israel-security',
            feedUrl: null
          },
          { 
            id:'digital_currency', 
            title:'üí≥ Digital Currency/Mark', 
            domain: 'prophetic_end_times',
            keywords: ['digital currency', 'cbdc', 'mark of the beast', 'biometric', 'digital id', 'cashless'],
            subCategories: ['CBDC', 'Digital ID', 'Biometrics'],
            currentScore:8.3, 
            yesterdayScore:8.0, 
            monthlyAvg:7.7, 
            weeklyTrend: 0.8,
            todayArticles:20, 
            url:'/digital-currency',
            feedUrl: null
          },
          { 
            id:'church_decline', 
            title:'‚õ™ Church Apostasy', 
            domain: 'god_theology_centered',
            keywords: ['church', 'apostasy', 'heresy', 'false doctrine', 'prosperity gospel', 'compromised'],
            subCategories: ['Mainline', 'Emergent', 'Woke'],
            currentScore:7.4, 
            yesterdayScore:7.1, 
            monthlyAvg:7.0, 
            weeklyTrend: 0.4,
            todayArticles:18, 
            url:'/church-decline',
            feedUrl: null
          },
          { 
            id:'middle_east_war', 
            title:'‚öîÔ∏è Middle East Conflict', 
            domain: 'prophetic_end_times',
            keywords: ['middle east', 'syria', 'turkey', 'russia', 'gog magog', 'war', 'conflict'],
            subCategories: ['Gog/Magog', 'Ezekiel 38', 'Psalm 83'],
            currentScore:7.8, 
            yesterdayScore:7.5, 
            monthlyAvg:7.3, 
            weeklyTrend: 0.6,
            todayArticles:28, 
            url:'/middle-east-war',
            feedUrl: null
          }
        ];
      }

      escapeHTML(str) {
        const div = document.createElement('div');
        div.textContent = str;
        return div.innerHTML;
      }

      getTimeAgo(ts) {
        const now = Date.now();
        const t = (ts instanceof Date) ? ts.getTime() : (typeof ts === 'number' ? ts : Date.parse(ts));
        const diff = Math.max(0, Math.floor((now - t) / 1000));
        if (diff < 60) return `${diff}s ago`;
        if (diff < 3600) return `${Math.floor(diff/60)}m ago`;
        if (diff < 86400) return `${Math.floor(diff/3600)}h ago`;
        return `${Math.floor(diff/86400)}d ago`;
      }
      
      getDemoArticles(topicId) {
        const demo = {
          antichrist: [
            { title:'EU Leader Proposes New Global Governance Framework', score:8.7, url:'#', publishedAt: Date.now()-3600000 },
            { title:'International Peace Summit Scheduled for Jerusalem', score:8.2, url:'#', publishedAt: Date.now()-7200000 },
            { title:'Tech Mogul Announces Universal ID Platform', score:7.9, url:'#', publishedAt: Date.now()-10800000 }
          ],
          temple_mount: [
            { title:'Third Temple Foundation Stones Delivered to Jerusalem', score:9.1, url:'#', publishedAt: Date.now()-900000 },
            { title:'Red Heifer Born in Israel Deemed Suitable for Sacrifice', score:8.8, url:'#', publishedAt: Date.now()-4500000 },
            { title:'Temple Institute Completes High Priest Garments', score:8.5, url:'#', publishedAt: Date.now()-8100000 }
          ],
          israel_security: [
            { title:'Israel Deploys New AI Defense System Along Borders', score:8.9, url:'#', publishedAt: Date.now()-450000 },
            { title:'Regional Powers Form New Military Alliance Against Israel', score:8.6, url:'#', publishedAt: Date.now()-3150000 },
            { title:'UN Security Council Calls Emergency Session on Middle East', score:8.3, url:'#', publishedAt: Date.now()-7650000 }
          ],
          digital_currency: [
            { title:'WHO Partners with Tech Giants on Global Health ID', score:8.3, url:'#', publishedAt: Date.now()-1350000 },
            { title:'Biometric Payment Systems Launch in European Cities', score:8.0, url:'#', publishedAt: Date.now()-4950000 },
            { title:'Central Bank Digital Currencies Testing Phase Complete', score:7.7, url:'#', publishedAt: Date.now()-11700000 }
          ],
          middle_east_war: [
            { title:'NATO Deploys Forces to Eastern Mediterranean', score:7.8, url:'#', publishedAt: Date.now()-1200000 },
            { title:'Iran Accelerates Nuclear Program Amid Tensions', score:7.5, url:'#', publishedAt: Date.now()-3600000 },
            { title:'Russia and Turkey Form New Defense Partnership', score:7.2, url:'#', publishedAt: Date.now()-6600000 }
          ],
          church_decline: [
            { title:'Major Denomination Abandons Biblical Marriage Definition', score:7.4, url:'#', publishedAt: Date.now()-2700000 },
            { title:'Seminary Removes Biblical Inerrancy from Curriculum', score:7.1, url:'#', publishedAt: Date.now()-6300000 },
            { title:'Church Attendance Hits All-Time Low in Western Nations', score:6.8, url:'#', publishedAt: Date.now()-12600000 }
          ]
        };
        return demo[topicId] || [];
      }

      init() {
        const urlParams = new URLSearchParams(window.location.search);
        const topicId = urlParams.get('id');
        const topic = this.topics.find(t => t.id === topicId);

        if (topic) {
          this.renderTopicDetail(topic);
        } else {
          document.getElementById('topicDetailContainer').innerHTML = '<h2>Topic not found</h2>';
        }
      }

      async renderTopicDetail(topic) {
        const container = document.getElementById('topicDetailContainer');
        
        const scoreClass = topic.currentScore >= 8 ? 'score-high' : 
                           topic.currentScore >= 6 ? 'score-medium' : 'score-low';
        const trend = topic.currentScore > topic.yesterdayScore ? '‚ÜóÔ∏è' : 
                       topic.currentScore < topic.yesterdayScore ? '‚ÜòÔ∏è' : '‚û°Ô∏è';
        const trendColor = topic.currentScore > topic.yesterdayScore ? '#00ff88' : 
                            topic.currentScore < topic.yesterdayScore ? '#ff4444' : '#ffff00';
        const weeklyTrend = topic.weeklyTrend > 0 ? '‚ÜóÔ∏è' : topic.weeklyTrend < 0 ? '‚ÜòÔ∏è' : '‚û°Ô∏è';
        const weeklyTrendColor = topic.weeklyTrend > 0 ? '#00ff88' : topic.weeklyTrend < 0 ? '#ff4444' : '#ffff00';
        const keywordsHTML = topic.keywords.map(k => `<a href="#" class="keyword">${this.escapeHTML(k)}</a>`).join(' ');
        const subCategoriesHTML = topic.subCategories.map(k => `<a href="#" class="subcategory">${this.escapeHTML(k)}</a>`).join(' ');

        let articles = [];
        if (topic.feedUrl) {
          try {
            articles = await FeedParser.parse(topic.feedUrl);
          } catch(e){ console.warn('Detail feed error:', e); }
        } else {
          articles = this.getDemoArticles(topic.id) || [];
        }
        
        const articlesHTML = articles.map(article => {
          return `
            <div class="article-item">
              <div class="article-title"><a href="${article.url}" target="_blank" rel="noopener">${this.escapeHTML(article.title || 'Untitled')}</a></div>
              <div class="article-meta">${this.getTimeAgo(article.publishedAt)} ‚Ä¢ Score: ${article.score || '‚Äî'}</div>
            </div>
          `;
        }).join('');

        const html = `
          <div class="topic-card" style="max-width: 800px; margin: auto;">
            <div class="topic-header">
              <div class="topic-title">${this.escapeHTML(topic.title)}</div>
              <div class="topic-score ${scoreClass}">${topic.currentScore}</div>
            </div>
            <div class="topic-keywords">${keywordsHTML}</div>
            <div class="topic-subcategories">${subCategoriesHTML}</div>
            <div class="topic-stats" style="grid-template-columns: repeat(4, 1fr);">
              <div class="mini-stat">
                <div class="mini-stat-number" style="color:${trendColor}">${trend}</div>
                <div class="mini-stat-label">vs Yesterday</div>
              </div>
              <div class="mini-stat">
                <div class="mini-stat-number" style="color:${weeklyTrendColor}">${weeklyTrend} ${topic.weeklyTrend}</div>
                <div class="mini-stat-label">Weekly Trend</div>
              </div>
              <div class="mini-stat">
                <div class="mini-stat-number">${topic.monthlyAvg}</div>
                <div class="mini-stat-label">Monthly Avg</div>
              </div>
              <div class="mini-stat">
                <div class="mini-stat-number">${topic.todayArticles}</div>
                <div class="mini-stat-label">Today's Articles</div>
              </div>
            </div>
            <div class="recent-articles" style="max-height: none;">
              ${articlesHTML}
            </div>
          </div>
        `;
        container.innerHTML = html;
      }
    }

    // Initialize Page
    const boot = () => {
      try { 
        console.log('üöÄ Initializing Single Topic Page...');
        new SingleTopicPage(); 
      }
      catch (e) { 
        console.error('‚ùå Page initialization failed:', e); 
      }
    };
    
    if (document.readyState === 'loading') {
      document.addEventListener('DOMContentLoaded', boot, { once: true });
    } else { 
      boot(); 
    }
  </script>
</body>
</html>
